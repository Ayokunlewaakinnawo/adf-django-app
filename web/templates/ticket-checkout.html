<!DOCTYPE html>

<html data-wf-page="64b69d86931717f55993f253" data-wf-site="6416913004ae8a2b5cbbad43">

    {% extends 'base/base.html' %}
    {% load static %}
    {% block content %}
    <head>
        <script src="https://js.stripe.com/v3/">
        </script>

        <style type="text/css">
            .StripeElement {
        box-sizing: border-box;
        height:40px;
        padding: 10px 12px;
        border: 1px solid transparent;
        border-radius: 4px;
        background-color: #3c4155ce;
        box-shadow: 0 1px 3px 0 #282828;
        -webkit-transition: box-shadow 150ms ease;
        transition: box-shadow 150ms ease;
        }
        .StripeElement--focus {
        box-shadow: 0 1px 3px 0 #121212c9;
        }
        .StripeElement--invalid {
        border-color: #fa755a;
        }
        .StripeElement--webkit-autofill {
        background-color: #fefde5 !important;
        }

        .submit-button-7 {
        margin-top: 20px;
        }

        /* Style for input fields */
        .w-input {
            background-color: #3c4155ce; /* Change this to the desired background color */
            color: rgb(250, 250, 250); /* Change this to the desired text color */
            border: 0px solid rgba(128, 128, 128, 0); /* Add a border for visual distinction */
        }
        </style>

        <link href="{% static 'web/images/favicon.png' %}" rel="shortcut icon" type="image/x-icon"/>
        <link href="{% static 'web/images/webclip.png' %}" rel="apple-touch-icon"/>
    </head>

    <body class="body-2">
        <div class="w-container">
            <div style="display: flex; align-items:center; justify-content: center; gap: 20px;" >

                <div class="section_donate">
                    
                </div>
    
                <div class="section_donate">
                    <div>
                        <div class="div-block-134" >
                            <div class="text-block-195" > 
                                Ticket Purchase 
                            </div>
                            <div>
                        <div class="div-block-134" >
                            <div class="text-block-195" >

                                <div class="div-block-125">
                                    <img alt="Ticket" loading="lazy" src="{% static 'web/images/🎟️.svg' %}"/>
                                </div>
                                <div style="display:block">
                                    <h5>
                                        {{tickettype}} Ticket
                                    </h5>
                                    <h2>
                                        ${{amount}}
                                    </h2>
                                </div>
                            
                            </div>
                        </div>
                    </div>
                            <!--Styling for Selected amount button-->
                            <style>
                                .selected {
                                    background-color: #0c31c9; /* Change this to your desired background color */
                                    color: white;
                                }
                            </style>
                            <!--<div class="w-layout-grid amount_grid">
                                <a class="amount_btn w-button" href="#" id="w-node-_7646b922-af4b-a73f-44d2-b941927127fd-5993f253">
                                    $ 25
                                </a>
                                <a class="amount_btn w-button" href="#" id="w-node-_338b2365-7878-3e48-cc9f-0a18bdd387f3-5993f253">
                                    $ 50
                                </a>
                                <a class="amount_btn w-button" href="#" id="w-node-_3659f918-8232-8964-c50b-6f09800ab5a3-5993f253">
                                    $ 100
                                </a>
                                <a class="amount_btn w-button" href="#" id="w-node-_24284ae6-9224-91c0-4632-b96525e46fb3-5993f253">
                                    $ 300
                                </a>
                            </div>-->
    
                            <div>
                                <br>
                                <div id="loader" style="display: none; flex-direction: column; align-items: center; text-align: center;">
                                    <!-- Add your loader HTML/CSS here -->
                                    <div style="max-width: 50px;">
                                        <img src="https://media.tenor.com/GdWFHSpv44EAAAAj/loading-circles.gif">
                                    </div>
                                    Processing your payment ...
                                </div>
                                <div class="w-form">
                                        
                                        <div class="w-embed w-script">
    
                                                <form action="{% url 'ticketcharge' %}" id="payment-form" method="post">
                                                    {% csrf_token %}
                                                    
                                                    <input class="w-input" type="hidden" data-name="Amount 2" id="amount" maxlength="256" name="amount" value="{{amount}}" required="" type="number" />
                                                    <label for="name-2">
                                                        Name
                                                    </label>
                                                    <input class="w-input" data-name="Name 2" id="name" maxlength="256" name="name" placeholder="" type="text"/>
                                                    <label for="email-2">
                                                        Email Address
                                                    </label>
                                                    <input class="w-input" data-name="Email 2" id="email" maxlength="256" name="email" placeholder="" required="" type="email"/>
                                                    <div class="form-row">
                                                        <label for="card-element">
                                                            Credit or debit card
                                                        </label>
                                                        <div id="card-element">
                                                            <!--  a Stripe Element will be inserted here.  -->
                                                        </div>
                                                        <!--  Used to display form errors  -->
                                                        <div id="card-errors" role="alert">
                                                        </div>
                                                    </div>
                                                    <input class="submit-button-7 w-button" data-wait="Please wait..." type="submit" value="Pay" onclick="showLoader()"/>
                                                </form>
                                                <div style="max-width: 25em;">
                                                    <img src="{% static 'web/images/stripe-badge-transparent.png' %}" />
                                                </div>
                                                <br>  
    
                                                {% if messages %}
                                                    <div class="alert alert-danger" style="color: red">
                                                        {% for message in messages %}
                                                            {{ message }}
                                                        {% endfor %}
                                                    </div>
                                                {% endif %}  
                                                              
                                            
                                        </div>
                                    
                                </div>
                            </div>
                            <div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
       

        </div>
        <div class="laser_divided">
            <img alt="" class="image-15" loading="lazy" sizes="(max-width: 479px) 100vw, 459px" src="{% static 'web/images/Border_line.png' %}" srcset="{% static 'web/images/Border_line-p-500.png' %} 500w, {% static 'web/images/Border_line-p-800.png' %} 800w, {% static 'web/images/Border_line.png' %} 918w" width="459"/>
        </div>
        
        <script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6416913004ae8a2b5cbbad43" type="text/javascript">
        </script>
        <script src="{% static 'web/js/webflow.js' %}" type="text/javascript">
        </script>
        <script>
            // Add native form submission support for Webflow forms. This makes all forms asynchronous.
    async function submitForm(event, formElement) {
        /*
        We use this function to make static html forms submit data asynchronously.
        */
        event.preventDefault();

        const formData = new FormData(formElement);
        const response = await fetch(formElement.action, { method: formElement.method, body: formData });

        if (response.ok) {
            formElement.style.display = 'none';
            const formDoneElement = formElement.parentElement.querySelector('.w-form-done');
            if (formDoneElement) {
                formDoneElement.style.display = 'block';
            }
        } else {
            const formFailElement = formElement.parentElement.querySelector('.w-form-fail');
            if (formFailElement) {
                formFailElement.style.display = 'block';
            }
        }
    }

    const forms = document.querySelectorAll('form');
    forms.forEach(form => form.addEventListener('submit', event => submitForm(event, form)));
        </script>

<!--STRIPE JSDK TOOL-->
<script>
    // -----Create a stripe client-------//
    var stripe = Stripe('');
    // ------Create an instance of Elements-------//
    var elements = stripe.elements();
    // Customise styling & Formatting --optional-- // ---->
    var style = {
    base: {
    color: '#ffff',
    fontfamily: '"Helvetica Neue", Helvetica, sans-sefif',
    fontsize: '16px',
    '::placeholder': {
    color: '#aab7c4'
    }
    },
    invalid: {
    color: '#fa755a',
    iconColor: '#fa755a'
    }
    };
    //Create an instance of the card Element.
    var card = elements.create('card', {style: style});
    //Add an instance of the card Element into the card-element <div>.
    card.mount('#card-element');
    //Handle real-time validation errors from the card Element.
    card.addEventListener('change', function(event) {
    var displayError = document.getElementById('card-errors');
    if (event.error) {
    displayError.textContent = event.error.message;
    } else {
    displayError.textContent = '';
    }
    });
    //Handle form submission//
    var form = document.getElementById('payment-form');
    form.addEventListener('submit', function(event){
    event.preventDefault();
    stripe.createToken(card).then(function(result){
    if (result.error) {
    //inform user if there's error//
    var errorElement = document.getElementById('card-error');
    errorElement.textContent = result.error.message;
    } else {
    //Send the token to you server//
    stripeTokenHandler(result.token);
    }
    });
    });
    //Submit the form with the token ID//
    //--- Loader Script-->
    function stripeTokenHandler(token) {
        var loader = document.getElementById('loader');
        loader.style.display = 'flex'; // Show the loader

    // Insert the token ID into the form so it gets submitted to the server//
    var form = document.getElementById('payment-form');
    var hiddenInput = document.createElement('input');
    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', 'stripeToken');
    hiddenInput.setAttribute('value', token.id);
    form.appendChild(hiddenInput);
    // Submit the form
    form.submit();
    }
</script>

<!-- Script for selection amount into the custom input amount-->
<script>
    const amountButtons = document.querySelectorAll('.amount_btn');
    const customAmountInput = document.getElementById('amount');

    amountButtons.forEach(button => {
        button.addEventListener('click', function() {
            // Reset background color of all buttons
            amountButtons.forEach(btn => btn.classList.remove('selected'));

            const buttonText = button.innerText.trim();
            const amountValue = buttonText.replace('$', '').trim();
            customAmountInput.value = amountValue;

            // Change background color of clicked button
            button.classList.add('selected');
        });
    });
</script>

<!-- Formatting the Custom input amount -->




    </body>

    {% endblock %}
</html>
