<!DOCTYPE html>

<html data-wf-page="64efe3576a8a41f5f3f266bc" data-wf-site="6416913004ae8a2b5cbbad43">
    {% extends 'base/base.html' %}
    {% load static %}
    {% block content %}
    
    <style>
    .form-container {
        display: block;
        max-width: 500px; /* You can adjust the width as needed */
        margin: auto;
        padding: 20px;
        border-radius: 10px;
    }
    
    .form-container label {
        display: block;
        font-weight: bold;
        margin-top: 10px;
    }
    
    .form-container input{
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        margin-bottom:10px;
        border: 1px solid #2c3144;
        border-radius: 2px;
        background-color: #2c3144; /* White background for input fields */
    }

    .form-container textarea {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        margin-bottom:10px;
        border: 1px solid #2c3144;
        border-radius: 2px;
        background-color: #2c3144; /* White background for input fields */
    }

    .error-dialog {
    display: block;
    position: fixed;
    z-index: 9999;
    top: 50%;
    left: 50%;
    text-align: center;
    transform: translate(-50%, -50%);
    padding: 10px;
    background-color: #f44336;
    color: white;
    border-radius: 5px;
    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }

    .close-btn {
    position: absolute;
    top: 5px;
    right: 10px;
    font-size: 20px;
    cursor: pointer;
    }

    </style>

    <body class="body-6">
         <!--CHANGE / REST PASSWORD ERROR MESSAGES !!!!-->
        {% if form.errors %}
            <div id="error-dialog" class="error-dialog">
                <span class="close-btn" onclick="closeErrorDialog()">&times;</span>
                <div class="alert alert-danger">
                    <strong>Error:</strong>
                    {% for field, error in form.errors.items %}
                        {{ error }}
                    {% endfor %}
                    <p> Return to the Password Tab <br> and try again.</p>
                </div>
            </div>
        {% endif %}

        <div class="fn-section-405">
        </div>
        <div class="brix---section-13">
            <div class="brix---container-default-17 w-container">
                <div>
                    <div class="user_tab w-tabs" data-current="Tab 1" data-duration-in="300" data-duration-out="100" data-easing="ease">

                        <!-- TAB MENU -->
                        <div class="tabs-menu-2 w-tab-menu">
                            <a class="tab-link-tab-1-2 w-inline-block w-tab-link w--current" data-w-tab="Tab 1">
                                <div class="text-block-202">
                                    User Profile
                                </div>
                            </a>
                            <a class="tab-link-tab-2-2 w-inline-block w-tab-link" data-w-tab="Tab 2">
                                <div class="text-block-200">
                                    Driver
                                </div>
                            </a>
                            <a class="tab-link-tab-3-2 w-inline-block w-tab-link" data-w-tab="Tab 3">
                                <div class="text-block-201">
                                    Settings
                                </div>
                            </a>
                            <a class="tab-link-tab-4 w-inline-block w-tab-link" data-w-tab="Tab 4">
                                <div class="text-block-204">
                                    Membership
                                </div>
                            </a>
                            <a class="tab-link-tab-5 w-inline-block w-tab-link" data-w-tab="Tab 5">
                                <div class="text-block-205">
                                    Password
                                </div>
                            </a>
                        </div>
                        <div class="tabs-content-2 w-tab-content">
                                    
                            <!-- TAB 1 - CREATE POST -->
                            <div class="tab-pane-tab-1-2 w-tab-pane w--tab-active" data-w-tab="Tab 1">
                                <div class="div-block-146">
                                    <h2 class="brix---heading-h2-size-11">
                                        Hello {{ request.user.first_name }} {{ request.user.last_name }} 
                                    </h2>
                                    <p class="brix---paragraph-default-15">
                                        <p>We're thrilled to have you as a member of our community. Your contributions help us make a positive impact in the world.</p>
                                    </p>
                                </div>

                                <div class="div-block-149" style="margin-top: 5em;">
                                    <div class="div-block-151">
                                        <h4>
                                            Post an article
                                        </h4>
                                        <a class="link-block-13 w-inline-block" href="{% url 'createpost' %}">
                                            <div class="div-block-152">
                                                <h4 class="heading-18">
                                                    Create Post
                                                </h4>
                                                <div class="w-embed">
                                                    <svg fill="none" height="49" stroke="#2969ef" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewbox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg">
                                                        <circle cx="12" cy="12" r="10">
                                                        </circle>
                                                        <line x1="12" x2="12" y1="8" y2="16">
                                                        </line>
                                                        <line x1="8" x2="16" y1="12" y2="12">
                                                        </line>
                                                    </svg>
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                    <!--Notification Message-->
                                        {% if messages %}
                                            <div>
                                                <ul class="messages" id="message" style="padding: 3px; background-color:green; display: block; text-align:center;" >
                                                    {% for message in messages %}
                                                    
                                                        {{ message }}
                                                    
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        {% endif %}
                                        

                                    <!------- BLOG POST CARD -- CREATED BY USER------->
                                        <div class="blogpostcrad">
                                            {% if user_posts %}
                                                <div class="w-layout-grid uui-blog03_list">
                                                    <!-- BLOG POST CARD-->
                                                    {% for post in user_posts %}
                                                        <div class="uui-blog03_item">
                                                            <a class="uui-blog03_image-link w-inline-block" data-w-id="651af3ec-b6dd-46a0-fbb9-9191f8ba860f" href="{% url 'blog_detail' post.slug %}">
                                                                <div class="uui-blog03_image-wrapper">
                                                                    {% if post.image1 %}

                                                                        <img alt="{{ post.title }}" class="uui-blog03_image" loading="lazy" sizes="(max-width: 479px) 93vw, (max-width: 767px) 96vw, 94vw" src="{{ post.image1.url }}" srcset=""/>
                                                                    
                                                                    {% endif %}
                                                                </div>
                                                            </a>
                                                            <a class="uui-blog03_title-link w-inline-block" data-w-id="651af3ec-b6dd-46a0-fbb9-9191f8ba8612" href="{% url 'blog_detail' post.slug %}">
                                                                <h1 class="uui-heading-xsmall-7">
                                                                    {{ post.title }}
                                                                </h1>
                                                                <div class="uui-blog03_icon w-embed">
                                                                    <svg fill="none" height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                                                                        <path d="M7 17L17 7M17 7H7M17 7V17" stroke="CurrentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                                                                        </path>
                                                                    </svg>
                                                                </div>
                                                            </a>
                                                            <div class="uui-text-size-medium-13">
                                                                {{ post.desc }}
                                                            </div>
                                                            <div class="uui-blog03_author-wrapper">
                                                                <div class="uui-blog03_author-text">
                                                                    <div class="uui-blog03_author-heading">
                                                                        {{ post.user }}
                                                                    </div>
                                                                    <div class="uui-blog03_date-wrapper">
                                                                        <div class="uui-text-size-small-10">
                                                                            {{ post.date_added }}
                                                                        </div>
                                                                        <div class="uui-text-divider-2 text-size-small">
                                                                            •
                                                                        </div>
                                                                        <div class="uui-text-size-small-10">
                                                                            5 min read
                                                                        </div>
                                                                        <div class="uui-text-divider-2 text-size-small">
                                                                            •
                                                                        </div>

                                                                        <!--DELETE POST BTN-->
                                                                        <div class="p_delete">
                                                                            <div class="w-embed">
                                                                                <form method="post" action="{% url 'ProfilePg' %}" id="deleteForm"  onsubmit="return confirmDelete(event);">
                                                                                    {% csrf_token %}
                                                                                    <input type="hidden" name="slug" value="{{ post.slug }}">
                                                                                    <button type="submit" name="delete_post" id="deleteButton" title="Delete Post" style="background-color: transparent;">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#e80e0e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                                                                                    </button>
                                                                                </form>
                                                                            </div>
                                                                        </div>

                                                                        <!-- EDIT POST BTN-->
                                                                        <div class="p_edit">
                                                                            <div class="w-embed">
                                                                                <a href="{% url 'edit_blog_post' slug=post.slug %}" title="Edit Post">
                                                                                    <button  type="submit" name="edit_Button" id="edit_Button" style="background-color: transparent;">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#0762d6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></svg>
                                                                                    </button>
                                                                                </a>
                                                                                <!--<form method="post" action="{% url 'edit_blog_post' slug=post.slug %}" id="editForm" >
                                                                                    {% csrf_token %}
                                                                                    <input type="hidden" name="slug" value="{{ post.slug }}">
                                                                                    <button type="submit" name="edit_Button" id="edit_Button" style="background-color: transparent;">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#0762d6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path><polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon></svg>
                                                                                    </button>
                                                                                </form>-->
                                                                            </div>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            {% else %}
                                                <div style="margin-top: 2em; color: dimgrey; text-align:center ">
                                                    <h4> You haven't created any Blog Post Yet! </h4>
                                                </div>
                                            {% endif %}
                                        </div>
                                </div>
                            </div>

                            <!-- TAB 2 -  SETTINGS -->
                            <div class="w-tab-pane" data-w-tab="Tab 2">
                                <div class="div-block-147">
                                    <div class="text-block-203">
                                        Currently under construction...
                                    </div>
                                </div>
                            </div>

                            <!-- TAB 3 - EDIT PROFILE -->
                            <div class="w-tab-pane" data-w-tab="Tab 3">
                                <div class="w-layout-blockcontainer container-4 w-container">
                                    <div>
                                        <div class="sysf-avatar-wrapper sysf-vertical">
                                            <img alt="Avatar Placeholder" class="sysf-avatar sysf-default" height="44" loading="lazy" src="{% static 'web/images/Avatar-Placeholder.svg' %}" width="44"/>
                                            <div class="sysf-avatar-label-text sysf-centered sysf-s-m-t-8">
                                                <div class="sysf-body-text sysf-m sysf-bold sysf-c-t-neutral-100">
                                                    <strong>
                                                        {{ request.user.first_name }} {{ request.user.last_name }}
                                                    </strong>
                                                </div>
                                                <div class="sysf-body-text-copy sysf-m">
                                                    Member
                                                </div>
                                            </div>
                                        </div>

                                        <div class="w-form" id="Apply">
                                            <form class="application-form" data-name="Email Form" data-wf-element-id="db8731aa-75b4-6c94-e876-1503b4c778c6" data-wf-page-id="64efe3576a8a41f5f3f266bc" id="email-form" method="post" action="{% url 'ProfilePg' %}" name="email-form">
                                                {% csrf_token %}
                                                <div class="form-container">
                                                    <div class="application-form-title-wrapper">
                                                        <h4>
                                                            1. Personal Details
                                                            <br/>
                                                        </h4>
                                                        <p>
                                                            Update your personal profile info.
                                                            <br/>
                                                        </p>
                                                    </div>
                                                    <input class="form-field w-input" data-name="First Name" id="First-Name" maxlength="256" name="First-Name"  value="{{ request.user.first_name }} " readonly type="text" style="background-color: #2c3144; color: rgba(128, 128, 128, 0.6);" />
                                                    <input class="form-field w-input" data-name="Last Name" id="Last-Name" maxlength="256" name="Last-Name"  value="{{ request.user.last_name }} " readonly type="text" style="background-color: #2c3144; color: rgba(128, 128, 128, 0.6);"/>
                                                    <input class="form-field w-input" data-name="Email 2" id="email-2" maxlength="256" name="email-2" value="{{ request.user }} " readonly type="email" style="background-color: #2c3144; color: rgba(128, 128, 128, 0.6);"/>
                                                    <label for="{{ update_form.linkedin.id_for_label }}"></label>
                                                        {{ update_form.linkedin }}
                                                            
                                                        <label for="{{ update_form.twitter.id_for_label }}"></label>
                                                        {{ update_form.twitter }}
                                
                                                        <label for="{{ update_form.facebook.id_for_label }}"></label>
                                                        {{ update_form.facebook }}
    
                                                    <div class="application-form-title-wrapper">
                                                        <h4>
                                                            2. Profile
                                                            <br/>
                                                        </h4>
                                                        <p>
                                                            What would you like to be in your profile bio
                                                            <br/>
                                                        </p>
                                                    </div>
                                                    {{ update_form.bio }}
                                                </div>
                                                
                                                <input class="button-primary-2 w-button" name="update_user" data-wait="Please wait..." type="submit" value="Apply"/>
                                            </form>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- TAB 4 -MEMBERSHIP -->
                            <div class="w-tab-pane" data-w-tab="Tab 4">
                                <div class="text-block-203">
                                    Currently under construction...
                                </div>
                            </div>

                            <!-- TAB 5 -  PASSWORD EDIT -->
                            <div class="w-tab-pane" data-w-tab="Tab 5">
                                <div class="w-layout-blockcontainer container-4 w-container">
                                    <div>
                                        <div class="w-form" id="Apply">
                                            <form class="application-form" data-name="Email Form" data-wf-element-id="7b3acf52-06ce-d542-1d93-f97c902f1e18" data-wf-page-id="64efe3576a8a41f5f3f266bc" method="post" action="{% url 'ProfilePg' %}" >
                                                {% csrf_token %}
                                                <div class="form-container">
                                                    <div class="application-form-title-wrapper">
                                                        <h4>
                                                            Change Password
                                                            <br/>
                                                        </h4>
                                                        <p class="paragraph-12">
                                                            Please enter your new password in the field below.
                                                            <br/>
                                                            Make sure you are not using your current password.
                                                            <br/>
                                                        </p>
                                                    </div>
                                                    <label for="{{ form.old_password.id_for_label }}">Current Password</label>
                                                    {{ form.old_password }}
                                                        
                                                    <label for="{{ form.new_password1.id_for_label }}">New Password</label>
                                                    {{ form.new_password1 }}
                                                        
                                                    <label for="{{ form.new_password2.id_for_label }}">Confirm new password</label>
                                                    {{ form.new_password2 }}
                                                </div>
                                                <input class="button-primary-2 w-button" name="change_pwd" data-wait="Please wait..." type="submit" value="Update"/>
                                            </form>
                                            <div style="text-align: center;" >

                                                {% for message in messages %}
                                                    {{message}}
                                                {% endfor %}
                        
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        <script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=6416913004ae8a2b5cbbad43" type="text/javascript">
        </script>
        <script src="{% static 'web/js/webflow.js' %}" type="text/javascript">
        </script>

        <!-- CUSTOM SCRIPT-->

        <!-- Script Intializing Tab 1 as active-->

        <script>
            (() => {
                function f(b) {
                    c.triggers[b] && c.triggers[b].click();
                }
                
                function g(d) {
                    c.triggers[d] && (c.triggers[d].classList.remove("w--current"), c.triggers[d].setAttribute("aria-selected", "false"), c.panes[d].classList.remove("w--tab-active"), window.jQuery && (jQuery(b).data(".wTabs").current = null));
                }
                
                const b = document.currentScript.parentElement.parentElement.querySelector(".w-tabs");
                const c = {
                    triggers: Array.from(b.querySelectorAll(".w-tab-link")),
                    panes: Array.from(b.querySelectorAll(".w-tab-pane"))
                };
            
                // Activate the second tab (index 1) initially
                f(1);
            
                c.triggers.forEach((a, b) => {
                    a.addEventListener("click", c => {
                        if (c.isTrusted) {
                            a.classList.contains("w--current") ? setTimeout(() => g(b), 50) : f(b);
                        }
                    });
                });
            })();
        </script> 

         <!--Confirmation dialog to delete post-->
         <script>
            function confirmDelete(event) {
                if (!confirm("Are you sure you want to delete this post?")) {
                    event.preventDefault();
                    return false;
                }
                return true;
            }
        </script>

        <!--automatically fade out the message Notification-->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
              setTimeout(function() {
                var message = document.getElementById('message');
                if (message) {
                  message.style.transition = 'opacity 1s';
                  message.style.opacity = '0';
                  setTimeout(function() {
                    message.style.display = 'none';
                  }, 1000); // 1 second for fade-out animation
                }
              }, 3000); // 3 seconds before fading out
            });
          </script>
        
        <!--SCRIPT FOR DIALOG BTN OF ERROR MSSG-->
        <script>
            function openErrorDialog() {
                document.getElementById('error-dialog').style.display = 'block';
            }

            function closeErrorDialog() {
                document.getElementById('error-dialog').style.display = 'none';
            }

        </script>
    </body>

    {% endblock %}
</html>
